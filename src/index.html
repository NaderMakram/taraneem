<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Security-Policy" content="script-src 'self'" />
    <title>Taraneem - ترانيم</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/switch.css" />
    <link rel="stylesheet" href="styles/index.css" />
    <link rel="stylesheet" href="styles/new-song.css" />
    <link rel="stylesheet" href="styles/loader.css" />
    <link rel="stylesheet" href="styles/dragula.css" />
    <link rel="stylesheet" href="styles/settings-modal.css" />
  </head>
  <body class="waiting-mode">
    <div id="version"></div>
    <button id="installBtn" class="gray-hover btn ripple">Restart</button>
    <div id="tools_bar">
      <!-- pause button -->
      <button class="gray-hover btn ripple" id="white" title="Pause (Ctrl + W)">
        <img src="./img/pause-play-filled.png" />
      </button>
      <!-- bold font button -->
      <button class="gray-hover" id="bold" title="Bold">Bold</button>

      <!-- font size -->
      <div id="fontSizeContainer">
        <button class="gray-hover fontSizeBtn" id="fontSizeMinus">
          <img src="./img/minus-bold.png" />
        </button>
        <div id="fontSize" title="Font Size">7</div>
        <button class="gray-hover fontSizeBtn" id="fontSizePlus">
          <img src="./img/plus-bold.png" />
        </button>
      </div>

      <!-- deep mode (deprecated) -->
      <input type="checkbox" id="deep_mode_input" name="deep" />
      <label
        for="deep_mode_input"
        id="deep_mode_label"
        name="deep"
        title="Fast/Slow Mode"
      ></label>

      <!-- dark mode switch #2 -->
      <label
        class="switch"
        for="dark_mode_input"
        title="Dark/Light Mode"
        id="dark_mode_label"
      >
        <input class="switch-input" type="checkbox" id="dark_mode_input" />
        <span class="switch-label" data-on="Dark" data-off="Light"></span>
        <span class="switch-handle"></span>
      </label>

      <!-- waiting toggle (deprecated) -->
      <!-- <div id="list-toggle-group">
        <img src="./img/list.png" />
        <input
          class="gray-hover"
          type="checkbox"
          title="List Mode"
          id="waiting_mode_input"
        />
      </div> -->

      <!-- extend song window -->
      <button
        class="gray-hover"
        id="extendSongWindowButton"
        title="extend song window"
      >
        <img src="./img/extend.png" />
      </button>

      <button id="open-settings-btn" class="icon-btn" aria-label="إعدادات">
        ⚙️
      </button>

      <!-- verse switch screen -->
      <div id="slide-screen"></div>
    </div>

    <!-- sibling chapters -->
    <div id="siblingChaptersBtns">
      <button class="gray-hover ripple" id="prevChapter">prev</button>
      <button class="gray-hover ripple" id="nextChapter">next</button>
    </div>

    <div id="main-wrapper">
      <div id="search-wrapper">
        <!-- <h2>البحث</h2> -->
        <input
          id="title-input"
          autocomplete="on"
          placeholder="أبحث عن ترنيمة، آية، أو شاهد كتابي"
        />
        <div id="search_output">
          <!-- start testing songs -->

          <!-- end testing -->
        </div>
      </div>
      <div id="waiting-wrapper" class="hide">
        <h2>قائمتي</h2>
        <div id="waiting_output">
          <!-- start testing songs -->

          <!-- end testing -->
        </div>
      </div>
      <div id="preview-wrapper">
        <!-- <h2>قائمة العرض</h2> -->
        <div id="preview_output">
          <!-- start testing songs -->
          <h4 id="slides-placeholder">
            اختر ترنيمة أو أصحاح لبدء عرض الأعداد هنا
          </h4>
          <!-- end testing -->
        </div>
      </div>
    </div>

    <!-- positioned absolute -->

    <div id="scroll-top" class="ripple">
      <img src="./img/up.png" />
    </div>

    <div
      id="settings-modal"
      class="settings-modal"
      aria-hidden="true"
      role="dialog"
      aria-modal="true"
    >
      <div class="settings-overlay" data-action="close"></div>

      <div
        class="settings-panel"
        role="document"
        aria-labelledby="settings-title"
      >
        <header class="settings-header">
          <button class="settings-close-btn" aria-label="إغلاق" title="إغلاق">
            ✕
          </button>
          <h2 id="settings-title" class="settings-title">الإعدادات</h2>
          <button class="settings-back-btn" aria-label="رجوع" title="رجوع">
            〉
          </button>
        </header>

        <main class="settings-body">
          <!-- Page: Menu -->
          <section class="settings-page" data-page="menu">
            <div class="settings-options">
            
                <button class="settings-option ripple" data-nav-to="songs-management">
                  الترانيم
                </button>
                <button class="settings-option soon" data-nav-to="">
                  الخلفيات
                  <span>قريبًا</span>
                </button>
                <button class="settings-option soon" data-nav-to="">
                  البث المباشر
                  <span>قريبًا</span>
                </button>
            
              <!-- future options go here -->
            </ul>
          </section>

          <!-- Page: Songs Management (list stub) -->
          <section class="settings-page" data-page="songs-management" hidden>
            <div class="songs-actions">
              <button data-nav-to="add-new-song" class="settings-option">إضافة ترنيمة جديدة</button>
              <div id="my-local-songs-wrapper">

                <h3>قائمة ترانيمي</h3>
                <ul id="my-local-songs"></ul>
              </div>
            </div>

            <!-- later: table/list/search UI will go here -->
          </section>

          <!-- Page: Add New Song (placeholder) -->
          <section
            id="new-song-section"
            class="settings-page"
            data-page="add-new-song"
            hidden
          >
            <!-- Form Container -->
            <div class="form-container">
              <div class="new-song-notes">
                <img src="./img/warning.png" class="warning" />
                <ul>
                  <li>الحد الأقصى لكل شريحة هو 5 أسطر فقط.</li>
                  <li>
                    هذه الترنيمة ستكون محفوظة على جهازك، ولن يتم ازالتها عند
                    تثبيت التحديثات القادمة.
                  </li>
                  <li>
                    سوف تتمكن من تعديل هذه الترنيمة لاحقًا في قائمة ادارة
                    الترانيم.
                  </li>
                </ul>
              </div>
              <!-- Title -->
              <input
                type="text"
                id="song-title"
                placeholder="ادخل عنوان الترنيمة"
                required
              />

              <!-- No Chorus -->
              <div class="field">
                <label>
                  <input type="checkbox" id="no-chorus" />
                  هذه الترنيمة عبارة عن أعداد فقط ولا تحتوي على قرار.
                </label>
              </div>

              <!-- Chorus First -->
              <div class="field chorus-first-wrapper">
                <label>
                  <input type="checkbox" id="chorus-first" />
                  هذه الترنيمة تبدأ بالقرار أولًا ثم الأعداد.
                </label>
              </div>

              <!-- Chorus Section -->
              <h5 id="chorus-title">القرار</h5>
              <div id="chorus-section" class="section">
                <div class="slides-container" id="chorus-slides"></div>
                <button
                  type="button"
                  id="add-chorus-slide"
                  class="add-new-slide-btn"
                >
                  أضف شريحة جديدة للقرار
                  <img src="./img/plus.svg" />
                </button>
              </div>

              <!-- Verses Section -->
              <h5>الأعداد</h5>
              <div id="verses-section" class="section">
                <div id="verses-container"></div>
                <button type="button" id="add-verse" class="add-new-verse-btn">
                  أضف عدد جديد
                  <img src="./img/plus.svg" />
                </button>
              </div>

              <!-- Save -->
              <button id="save-song" class="btn primary">حفظ الترنيمة</button>
          </section>

          <!-- Page: Success Message -->
          <section class="settings-page" data-page="success-message" hidden>
            <div class="success-message">
              <div class="success-animation">
                <svg class="progress-ring" width="120" height="120">
                  <circle
                    class="progress-ring__circle"
                    stroke="white"
                    stroke-width="4"
                    fill="transparent"
                    r="52"
                    cx="60"
                    cy="60"
                  />
                </svg>
                <img src="./img/success.png" alt="Success" />
              </div>
              <p>تم حفظ الترنيمة بنجاح</p>
            </div>
          </section>
        </main>
      </div>
    </div>

    <!-- renderer -->
    <script src="renderer.js" type="module"></script>
    <!-- dragula -->
    <script src="./helpers/dragula.js"></script>
    <!-- modal -->
    <script src="./helpers/settings-modal.js"></script>
    <script src="./helpers/addNewSong.js"></script>
  </body>
</html>
